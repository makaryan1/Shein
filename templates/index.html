
<!DOCTYPE html>
<html lang="{{ current_lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ _["Online Shopping"] }} - SHEIN Market</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Header -->
    <header class="modern-header">
        <div class="container-fluid">
            <nav class="navbar navbar-expand-lg">
                <div class="d-flex align-items-center justify-content-between w-100">
                    <a class="navbar-brand modern-brand" href="/">
                        <div class="brand-icon">
                            <i class="fas fa-shopping-bag"></i>
                        </div>
                        <div class="brand-info">
                            <span class="brand-text">SHEIN Market</span>
                            <small class="brand-subtitle">{{ _["Online Shopping"] }}</small>
                        </div>
                    </a>

                    <div class="search-container mx-4 flex-grow-1">
                        <form action="{{ url_for('search') }}" method="GET" class="position-relative">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" name="q" class="form-control search-input" placeholder="Найти модную одежду, обувь, аксессуары..." required>
                            <button class="btn search-btn" type="submit">
                                <i class="fas fa-search"></i>
                            </button>
                        </form>
                    </div>

                    <div class="header-actions d-flex align-items-center gap-3">
                        <div class="language-selector">
                            {% for code, lang in languages.items() %}
                                <a href="{{ url_for('set_language', language=code) }}" 
                                   class="lang-btn {% if code == current_lang %}active{% endif %}"
                                   title="{{ lang['name'] }}">
                                    {{ lang['icon'] }}
                                </a>
                            {% endfor %}
                        </div>

                        {% if session.username %}
                            <div class="dropdown">
                                <button class="btn btn-user dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                    <i class="fas fa-user-circle me-2"></i>
                                    {{ session.username }}
                                </button>
                                <ul class="dropdown-menu dropdown-menu-end">
                                    <li><a class="dropdown-item" href="{{ url_for('profile') }}">
                                        <i class="fas fa-user me-2"></i>Профиль
                                    </a></li>
                                    <li><a class="dropdown-item" href="#">
                                        <i class="fas fa-shopping-bag me-2"></i>Мои заказы
                                    </a></li>
                                    <li><a class="dropdown-item" href="#">
                                        <i class="fas fa-heart me-2"></i>Избранное
                                    </a></li>
                                    {% if session.is_admin %}
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item" href="{{ url_for('admin_panel') }}">
                                            <i class="fas fa-cog me-2"></i>Админ-панель
                                        </a></li>
                                    {% endif %}
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="{{ url_for('logout') }}">
                                        <i class="fas fa-sign-out-alt me-2"></i>Выйти
                                    </a></li>
                                </ul>
                            </div>
                        {% else %}
                            <div class="auth-buttons d-flex gap-2">
                                <a href="{{ url_for('login') }}" class="btn btn-outline-primary btn-sm">
                                    <i class="fas fa-sign-in-alt me-1"></i> Войти
                                </a>
                                <a href="{{ url_for('register') }}" class="btn btn-primary btn-sm">
                                    <i class="fas fa-user-plus me-1"></i> Регистрация
                                </a>
                            </div>
                        {% endif %}

                        <a href="{{ url_for('cart') }}" class="cart-btn position-relative">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-count position-absolute">{{ cart_count or 0 }}</span>
                        </a>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="container mt-3">
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- Hero Banner -->
    <section class="hero-banner">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <div class="hero-content">
                        <h1 class="hero-title">Модная одежда со скидкой до 90%!</h1>
                        <p class="hero-subtitle">Миллионы стильных товаров по лучшим ценам. Бесплатная доставка от 1000₽</p>
                        <div class="hero-features">
                            <div class="feature-item">
                                <i class="fas fa-shipping-fast"></i>
                                <span>Быстрая доставка</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-undo"></i>
                                <span>Легкий возврат</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-shield-alt"></i>
                                <span>Гарантия качества</span>
                            </div>
                        </div>
                        <button class="btn btn-hero" onclick="scrollToProducts()">
                            <i class="fas fa-shopping-bag me-2"></i>
                            Начать покупки
                        </button>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="hero-visual">
                        <div class="deal-cards">
                            <div class="deal-card">
                                <div class="deal-badge">90%</div>
                                <div class="deal-text">СКИДКА</div>
                            </div>
                            <div class="deal-card">
                                <div class="deal-badge">FREE</div>
                                <div class="deal-text">ДОСТАВКА</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="categories-section">
        <div class="container">
            <div class="section-header text-center mb-5">
                <h2 class="section-title">{{ _["Categories"] }}</h2>
                <p class="section-subtitle">Выберите категорию и найдите именно то, что ищете</p>
            </div>
            <div class="categories-grid">
                <div class="category-card" onclick="filterByCategory('Женская одежда')">
                    <div class="category-icon">
                        <i class="fas fa-female"></i>
                    </div>
                    <h5 class="category-name">Женская одежда</h5>
                    <p class="category-count">1000+ товаров</p>
                </div>
                <div class="category-card" onclick="filterByCategory('Мужская одежда')">
                    <div class="category-icon">
                        <i class="fas fa-male"></i>
                    </div>
                    <h5 class="category-name">Мужская одежда</h5>
                    <p class="category-count">800+ товаров</p>
                </div>
                <div class="category-card" onclick="filterByCategory('Обувь')">
                    <div class="category-icon">
                        <i class="fas fa-shoe-prints"></i>
                    </div>
                    <h5 class="category-name">Обувь</h5>
                    <p class="category-count">500+ товаров</p>
                </div>
                <div class="category-card" onclick="filterByCategory('Сумки')">
                    <div class="category-icon">
                        <i class="fas fa-shopping-bag"></i>
                    </div>
                    <h5 class="category-name">Сумки</h5>
                    <p class="category-count">300+ товаров</p>
                </div>
                <div class="category-card" onclick="filterByCategory('Аксессуары')">
                    <div class="category-icon">
                        <i class="fas fa-gem"></i>
                    </div>
                    <h5 class="category-name">Аксессуары</h5>
                    <p class="category-count">600+ товаров</p>
                </div>
                <div class="category-card" onclick="filterByCategory('Красота')">
                    <div class="category-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <h5 class="category-name">Красота</h5>
                    <p class="category-count">400+ товаров</p>
                </div>
                <div class="category-card" onclick="filterByCategory('Дом')">
                    <div class="category-icon">
                        <i class="fas fa-home"></i>
                    </div>
                    <h5 class="category-name">Дом</h5>
                    <p class="category-count">700+ товаров</p>
                </div>
                <div class="category-card" onclick="filterByCategory('Спорт')">
                    <div class="category-icon">
                        <i class="fas fa-dumbbell"></i>
                    </div>
                    <h5 class="category-name">Спорт</h5>
                    <p class="category-count">350+ товаров</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Flash Sale Timer -->
    <section class="flash-sale-section">
        <div class="container">
            <div class="flash-sale-banner">
                <div class="sale-content">
                    <div class="sale-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <div class="sale-info">
                        <h3>⚡ Молниеносная распродажа</h3>
                        <p>Успейте купить со скидкой до 80%!</p>
                    </div>
                    <div class="countdown" id="countdown">
                        <div class="time-unit">
                            <span class="time-number" id="hours">12</span>
                            <span class="time-label">часов</span>
                        </div>
                        <div class="time-unit">
                            <span class="time-number" id="minutes">34</span>
                            <span class="time-label">минут</span>
                        </div>
                        <div class="time-unit">
                            <span class="time-number" id="seconds">56</span>
                            <span class="time-label">секунд</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section class="products-section" id="products">
        <div class="container">
            <div class="section-header d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h2 class="section-title">Хиты продаж</h2>
                    <p class="section-subtitle">Самые популярные товары с отличными отзывами</p>
                </div>
                <div class="filter-buttons">
                    <button class="btn btn-filter active" onclick="showAll()">Все</button>
                    <button class="btn btn-filter" onclick="filterByPrice('low')">Низкая цена</button>
                    <button class="btn btn-filter" onclick="filterByPrice('high')">Высокий рейтинг</button>
                    <button class="btn btn-filter" onclick="filterByDiscount()">Скидки</button>
                </div>
            </div>

            <div class="products-grid" id="products-grid">
                {% for product in products %}
                <div class="product-card modern-card" data-category="{{ product.category }}" data-price="{{ product.price }}" data-rating="{{ product.rating }}" data-discount="{{ product.discount }}">
                    <div class="product-image-container">
                        <img src="{{ product.image }}" alt="{{ product.name }}" class="product-image" loading="lazy">
                        <div class="product-badges">
                            {% if product.discount > 0 %}
                                <span class="badge badge-sale">-{{ product.discount }}%</span>
                            {% endif %}
                            <span class="badge badge-shipping">Бесплатная доставка</span>
                        </div>
                        <div class="product-overlay">
                            <a href="{{ url_for('product_detail', product_id=product.id) }}" class="btn btn-quick-view">
                                <i class="fas fa-eye"></i>
                            </a>
                        </div>
                    </div>
                    <div class="product-info">
                        <div class="product-category">{{ product.category }}</div>
                        <h3 class="product-title">
                            <a href="{{ url_for('product_detail', product_id=product.id) }}" class="text-decoration-none text-dark">
                                {{ product.name }}
                            </a>
                        </h3>
                        <div class="product-rating">
                            <div class="stars">
                                {% for i in range(5) %}
                                    {% if i < product.rating %}
                                        ★
                                    {% else %}
                                        ☆
                                    {% endif %}
                                {% endfor %}
                            </div>
                            <span class="rating-text">({{ product.reviews_count or 0 }})</span>
                        </div>
                        <div class="product-price">
                            {% set discounted_price = product.price * (1 - product.discount / 100) %}
                            <span class="current-price">${{ "%.2f"|format(discounted_price) }}</span>
                            {% if product.discount > 0 %}
                                <span class="original-price">${{ "%.2f"|format(product.price) }}</span>
                                <span class="discount-badge">-{{ product.discount }}%</span>
                            {% endif %}
                        </div>
                        <div class="product-actions">
                            {% if session.user_id %}
                                <button class="add-to-cart-btn btn-primary" onclick="addToCart('{{ product.id }}')">
                                    <i class="fas fa-shopping-cart"></i>
                                    В корзину
                                </button>
                            {% else %}
                                <a href="{{ url_for('register') }}" class="add-to-cart-btn btn-primary text-decoration-none">
                                    <i class="fas fa-user-plus"></i>
                                    Войти для покупки
                                </a>
                            {% endif %}
                            <button class="wishlist-btn" onclick="toggleWishlist('{{ product.id }}')">
                                <i class="fas fa-heart"></i>
                            </button>
                        </div>
                                <i class="fas fa-eye"></i>
                                Быстрый просмотр
                            </button>
                        </div>
                        <button class="btn-wishlist" onclick="toggleWishlist('{{ product.id }}')">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>

                    <div class="product-info">
                        <div class="product-category">{{ product.category }}</div>
                        <h5 class="product-name">{{ product.name }}</h5>
                        <div class="product-rating">
                            <div class="stars">
                                {% for i in range(5) %}
                                    <i class="fas fa-star{% if i >= product.rating|round|int %} text-muted{% endif %}"></i>
                                {% endfor %}
                            </div>
                            <span class="rating-text">({{ product.rating }}) • 1.2k отзывов</span>
                        </div>

                        <div class="product-price">
                            {% if product.discount > 0 %}
                                <span class="current-price">${{ "%.2f"|format(product.price * (1 - product.discount / 100)) }}</span>
                                <span class="original-price">${{ "%.2f"|format(product.price) }}</span>
                                <span class="discount-badge">-{{ "%.0f"|format(product.price * product.discount / 100) }}$</span>
                            {% else %}
                                <span class="current-price">${{ "%.2f"|format(product.price) }}</span>
                            {% endif %}
                        </div>

                        <div class="product-actions">
                            <a href="{{ url_for('add_to_cart', product_id=product.id) }}" class="btn add-to-cart-btn">
                                <i class="fas fa-shopping-cart"></i>
                                {{ _["Add to Cart"] }}
                            </a>
                            <a href="{{ url_for('product_detail', product_id=product.id) }}" class="btn quick-view-btn">
                                <i class="fas fa-info-circle"></i>
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <!-- Load More Button -->
            <div class="text-center mt-5">
                <button class="btn btn-load-more" onclick="loadMoreProducts()">
                    <span class="btn-text">
                        <i class="fas fa-plus me-2"></i>
                        Показать еще товары
                    </span>
                    <div class="btn-loading" style="display: none;">
                        <div class="loading-spinner"></div>
                        Загрузка...
                    </div>
                </button>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features-section">
        <div class="container">
            <div class="row">
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shipping-fast"></i>
                        </div>
                        <h5>Быстрая доставка</h5>
                        <p>Доставка по всей России от 1-3 дней</p>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-undo"></i>
                        </div>
                        <h5>Легкий возврат</h5>
                        <p>30 дней на возврат без лишних вопросов</p>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h5>Гарантия качества</h5>
                        <p>Только проверенные товары от надежных брендов</p>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-headset"></i>
                        </div>
                        <h5>Поддержка 24/7</h5>
                        <p>Всегда готовы помочь вам с любыми вопросами</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="modern-footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-6 mb-4">
                    <div class="footer-brand">
                        <div class="brand-icon">
                            <i class="fas fa-shopping-bag"></i>
                        </div>
                        <h5>SHEIN Market</h5>
                        <p>Ваш надежный партнер в мире онлайн-шопинга. Миллионы товаров по лучшим ценам с доставкой по всему миру.</p>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6>Покупателям</h6>
                    <ul class="footer-links">
                        <li><a href="#">Как заказать</a></li>
                        <li><a href="#">Доставка и оплата</a></li>
                        <li><a href="#">Возврат товара</a></li>
                        <li><a href="#">Размерная сетка</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6>О компании</h6>
                    <ul class="footer-links">
                        <li><a href="#">О нас</a></li>
                        <li><a href="#">Вакансии</a></li>
                        <li><a href="#">Пресс-центр</a></li>
                        <li><a href="#">Партнерам</a></li>
                        <li><a href="#">Контакты</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6>Поддержка</h6>
                    <ul class="footer-links">
                        <li><a href="#">Центр помощи</a></li>
                        <li><a href="#">Связаться с нами</a></li>
                        <li><a href="#">Чат поддержки</a></li>
                        <li><a href="#">Статус заказа</a></li>
                        <li><a href="#">Отзывы</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6>Мы в соцсетях</h6>
                    <div class="social-links">
                        <a href="#" class="social-link">
                            <i class="fab fa-facebook"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-youtube"></i>
                        </a>
                        <a href="#" class="social-link">
                            <i class="fab fa-tiktok"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <p>&copy; 2024 SHEIN Market. Все права защищены.</p>
                    </div>
                    <div class="col-md-6 text-md-end">
                        <div class="payment-methods">
                            <i class="fab fa-cc-visa"></i>
                            <i class="fab fa-cc-mastercard"></i>
                            <i class="fab fa-cc-paypal"></i>
                            <i class="fab fa-apple-pay"></i>
                            <i class="fab fa-google-pay"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Quick View Modal -->
    <div class="modal fade" id="quickViewModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Быстрый просмотр</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="quickViewContent">
                    <!-- Content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Enhanced functionality with modern features
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            updateCountdown();
            setInterval(updateCountdown, 1000);
            initializeIntersectionObserver();
            initializeProductActions();
        }

        // Countdown Timer
        function updateCountdown() {
            const now = new Date().getTime();
            const saleEnd = new Date(now + 24 * 60 * 60 * 1000).getTime();
            const distance = saleEnd - now;

            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
            document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
            document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
        }

        // Smooth scroll to products
        function scrollToProducts() {
            document.getElementById('products').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }

        // Filter products by category
        function filterByCategory(category) {
            const products = document.querySelectorAll('.product-card');
            products.forEach(product => {
                const productCategory = product.dataset.category;
                if (productCategory === category) {
                    product.style.display = 'block';
                    product.classList.add('animate-fadeInUp');
                } else {
                    product.style.display = 'none';
                }
            });
            scrollToProducts();
            updateFilterButtons();
        }

        // Show all products
        function showAll() {
            const products = document.querySelectorAll('.product-card');
            products.forEach(product => {
                product.style.display = 'block';
                product.classList.add('animate-fadeInUp');
            });
            updateFilterButtons();
        }

        // Filter by price
        function filterByPrice(type) {
            const products = Array.from(document.querySelectorAll('.product-card'));
            if (type === 'low') {
                products.sort((a, b) => parseFloat(a.dataset.price) - parseFloat(b.dataset.price));
            } else if (type === 'high') {
                products.sort((a, b) => parseFloat(b.dataset.rating) - parseFloat(a.dataset.rating));
            }
            
            const container = document.getElementById('products-grid');
            products.forEach(product => container.appendChild(product));
            updateFilterButtons();
        }

        // Filter by discount
        function filterByDiscount() {
            const products = document.querySelectorAll('.product-card');
            products.forEach(product => {
                const discount = parseInt(product.dataset.discount) || 0;
                if (discount > 0) {
                    product.style.display = 'block';
                    product.classList.add('animate-fadeInUp');
                } else {
                    product.style.display = 'none';
                }
            });
            scrollToProducts();
            updateFilterButtons();
        }

        // Update filter button states
        function updateFilterButtons() {
            document.querySelectorAll('.btn-filter').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Toggle wishlist
        function toggleWishlist(productId) {
            const btn = event.target.closest('.btn-wishlist');
            const icon = btn.querySelector('i');
            
            if (icon.classList.contains('far')) {
                icon.classList.remove('far');
                icon.classList.add('fas');
                btn.classList.add('active');
                showToast('Товар добавлен в избранное!', 'success');
            } else {
                icon.classList.remove('fas');
                icon.classList.add('far');
                btn.classList.remove('active');
                showToast('Товар удален из избранного', 'info');
            }
        }

        // Quick view functionality
        function quickView(productId) {
            const modal = new bootstrap.Modal(document.getElementById('quickViewModal'));
            const content = document.getElementById('quickViewContent');
            
            content.innerHTML = '<div class="text-center p-4"><div class="loading-spinner"></div><p>Загрузка...</p></div>';
            modal.show();
            
            // Simulate loading product data
            setTimeout(() => {
                content.innerHTML = `
                    <div class="row">
                        <div class="col-md-6">
                            <img src="https://via.placeholder.com/400x500" class="img-fluid rounded" alt="Product">
                        </div>
                        <div class="col-md-6">
                            <h5>Название товара</h5>
                            <div class="rating mb-3">
                                <div class="stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                                <span class="ms-2">(4.8) • 234 отзыва</span>
                            </div>
                            <div class="price mb-3">
                                <span class="current-price h4">$29.99</span>
                                <span class="original-price ms-2">$49.99</span>
                            </div>
                            <p>Описание товара будет здесь...</p>
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary">Добавить в корзину</button>
                                <a href="/product/${productId}" class="btn btn-outline-primary">Подробнее</a>
                            </div>
                        </div>
                    </div>
                `;
            }, 1000);
        }

        // Load more products
        function loadMoreProducts() {
            const btn = event.target.closest('.btn-load-more');
            const btnText = btn.querySelector('.btn-text');
            const btnLoading = btn.querySelector('.btn-loading');
            
            btnText.style.display = 'none';
            btnLoading.style.display = 'flex';
            btn.disabled = true;
            
            setTimeout(() => {
                btnText.style.display = 'flex';
                btnLoading.style.display = 'none';
                btn.disabled = false;
                showToast('Новые товары загружены!', 'success');
            }, 2000);
        }

        // Initialize product actions
        function initializeProductActions() {
            document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const originalHTML = this.innerHTML;
                    this.innerHTML = '<div class="loading-spinner"></div> Добавляем...';
                    this.disabled = true;
                    
                    setTimeout(() => {
                        this.innerHTML = '<i class="fas fa-check"></i> Добавлено!';
                        this.classList.add('success');
                        
                        // Update cart count
                        const cartCount = document.querySelector('.cart-count');
                        const currentCount = parseInt(cartCount.textContent) || 0;
                        cartCount.textContent = currentCount + 1;
                        cartCount.classList.add('bounce');
                        
                        showToast('Товар добавлен в корзину!', 'success');
                        
                        setTimeout(() => {
                            this.innerHTML = originalHTML;
                            this.disabled = false;
                            this.classList.remove('success');
                            cartCount.classList.remove('bounce');
                        }, 2000);
                        
                        // Navigate to add to cart
                        setTimeout(() => {
                            window.location.href = this.href;
                        }, 500);
                    }, 800);
                });
            });
        }

        // Initialize Intersection Observer for animations
        function initializeIntersectionObserver() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-fadeInUp');
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.product-card, .category-card, .feature-card').forEach(el => {
                observer.observe(el);
            });
        }

        // Toast notification system
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast-notification toast-${type}`;
            toast.innerHTML = `
                <div class="toast-content">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Search enhancement
        document.querySelector('.search-input').addEventListener('focus', function() {
            this.parentElement.classList.add('focused');
        });

        document.querySelector('.search-input').addEventListener('blur', function() {
            this.parentElement.classList.remove('focused');
        });

        // Mobile menu toggle
        function toggleMobileMenu() {
            const mobileMenu = document.querySelector('.mobile-menu');
            mobileMenu.classList.toggle('active');
        }
    </script>
</body>
</html>

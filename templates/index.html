<!DOCTYPE html>
<html lang="{{ current_lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ _["Online Shopping"] if _ else "Online Shopping" }} - AliExpress</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container-fluid">
            <div class="d-flex justify-content-between">
                <div>
                    <a href="#">–ü—Ä–æ–¥–∞–≤–∞—Ç—å –Ω–∞ AliExpress</a>
                    <a href="#">–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</a>
                    <a href="#">–ü–æ–º–æ—â—å</a>
                </div>
                <div>
                    <a href="#">RU / $ USD</a>
                    <a href="#">–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Header -->
    <header class="modern-header">
        <div class="container-fluid">
            <div class="main-header">
                <div class="d-flex align-items-center justify-content-between">
                    <!-- Brand -->
                    <a href="/" class="modern-brand">
                        <div class="brand-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div>
                            <div class="brand-text">AliExpress</div>
                            <div class="brand-subtitle">–£–º–Ω—ã–π —à–æ–ø–ø–∏–Ω–≥</div>
                        </div>
                    </a>

                    <!-- Search -->
                    <div class="search-container">
                        <form class="search-form" action="{{ url_for('search') }}" method="GET">
                            <i class="search-icon fas fa-search"></i>
                            <input type="text" class="search-input" name="q" 
                                   placeholder="—Ç–µ–ª–µ—Ñ–æ–Ω, –ø–ª–∞—Ç—å–µ, –Ω–∞—É—à–Ω–∏–∫–∏..." 
                                   value="{{ request.args.get('q', '') }}">
                            <button type="submit" class="search-btn">–ü–æ–∏—Å–∫</button>
                        </form>
                    </div>

                    <!-- Actions -->
                    <div class="header-actions">
                        <!-- Language Selector -->
                        <div class="language-selector d-none d-lg-flex">
                            {% for lang_code, lang_info in languages.items() %}
                            <a href="{{ url_for('set_language', language=lang_code) }}" 
                               class="lang-btn {{ 'active' if current_lang == lang_code else '' }}">
                                {{ lang_info.icon }}
                            </a>
                            {% endfor %}
                        </div>

                        <!-- User Actions -->
                        {% if session.user_id %}
                            <div class="dropdown">
                                <button class="btn-user dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                    <i class="fas fa-user me-1"></i>{{ session.username }}
                                </button>
                                <ul class="dropdown-menu dropdown-menu-end">
                                    <li><a class="dropdown-item" href="{{ url_for('profile') }}">
                                        <i class="fas fa-user me-2"></i>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
                                    </a></li>
                                    <li><a class="dropdown-item" href="#">
                                        <i class="fas fa-box me-2"></i>–ú–æ–∏ –∑–∞–∫–∞–∑—ã
                                    </a></li>
                                    <li><a class="dropdown-item" href="#">
                                        <i class="fas fa-heart me-2"></i>–°–ø–∏—Å–æ–∫ –∂–µ–ª–∞–Ω–∏–π
                                    </a></li>
                                    {% if session.is_admin %}
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item" href="{{ url_for('admin_panel') }}">
                                            <i class="fas fa-cog me-2"></i>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
                                        </a></li>
                                    {% endif %}
                                    <li><hr class="dropdown-divider"></li>
                                    <li><a class="dropdown-item" href="{{ url_for('logout') }}">
                                        <i class="fas fa-sign-out-alt me-2"></i>–í—ã–π—Ç–∏
                                    </a></li>
                                </ul>
                            </div>
                        {% else %}
                            <div class="auth-buttons">
                                <a href="{{ url_for('login') }}" class="btn btn-outline-primary">
                                    –í–æ–π—Ç–∏
                                </a>
                                <a href="{{ url_for('register') }}" class="btn btn-primary">
                                    –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
                                </a>
                            </div>
                        {% endif %}

                        <!-- Cart -->
                        <a href="{{ url_for('cart') }}" class="cart-btn">
                            <i class="fas fa-shopping-cart"></i>
                            {% if cart_count and cart_count > 0 %}
                            <span class="cart-count">{{ cart_count }}</span>
                            {% endif %}
                        </a>
                    </div>
                </div>
            </div>

            <!-- Navigation Bar -->
            <div class="nav-bar">
                <div class="nav-categories">
                    <a href="#" class="nav-category">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</a>
                    <a href="#" class="nav-category">–ñ–µ–Ω—Å–∫–∞—è –æ–¥–µ–∂–¥–∞</a>
                    <a href="#" class="nav-category">–ú—É–∂—Å–∫–∞—è –æ–¥–µ–∂–¥–∞</a>
                    <a href="#" class="nav-category">–¢–µ–ª–µ—Ñ–æ–Ω—ã</a>
                    <a href="#" class="nav-category">–ö–æ–º–ø—å—é—Ç–µ—Ä—ã</a>
                    <a href="#" class="nav-category">–î–æ–º –∏ —Å–∞–¥</a>
                    <a href="#" class="nav-category">–°—É–º–∫–∏ –∏ –æ–±—É–≤—å</a>
                    <a href="#" class="nav-category">–ò–≥—Ä—É—à–∫–∏</a>
                    <a href="#" class="nav-category">–°–ø–æ—Ä—Ç</a>
                    <a href="#" class="nav-category">–ê–≤—Ç–æ—Ç–æ–≤–∞—Ä—ã</a>
                    <a href="#" class="nav-category">–Æ–≤–µ–ª–∏—Ä–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="container mt-3">
                {% for category, message in messages %}
                    <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- Hero Banner -->
    <section class="hero-banner">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <div class="hero-content">
                        <h1 class="hero-title">–°–∫–∏–¥–∫–∏ –¥–æ 90% –∫–∞–∂–¥—ã–π –¥–µ–Ω—å!</h1>
                        <p class="hero-subtitle">–ú–∏–ª–ª–∏–æ–Ω—ã —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –ª—É—á—à–∏–º —Ü–µ–Ω–∞–º —Å –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É</p>
                        <div class="hero-features">
                            <div class="feature-item">
                                <i class="fas fa-shipping-fast"></i>
                                <span>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-shield-alt"></i>
                                <span>–ó–∞—â–∏—Ç–∞ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-undo"></i>
                                <span>15 –¥–Ω–µ–π –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç</span>
                            </div>
                            <div class="feature-item">
                                <i class="fas fa-medal"></i>
                                <span>–ì–∞—Ä–∞–Ω—Ç–∏—è –∫–∞—á–µ—Å—Ç–≤–∞</span>
                            </div>
                        </div>
                        <button class="btn btn-hero" onclick="scrollToProducts()">
                            <i class="fas fa-search me-2"></i>
                            –ù–∞—á–∞—Ç—å –ø–æ–∫—É–ø–∫–∏
                        </button>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="hero-visual">
                        <img src="https://via.placeholder.com/400x300/FF6600/FFFFFF?text=AliExpress+Sale" 
                             alt="AliExpress Sale" class="img-fluid rounded">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Promotion Banners -->
    <section class="promotion-section">
        <div class="container">
            <div class="promotion-banners">
                <div class="promotion-banner">
                    <h3>üî• –ú–µ–≥–∞—Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∞</h3>
                    <p>–î–æ 90% —Å–∫–∏–¥–∫–∏ –Ω–∞ —Ç—ã—Å—è—á–∏ —Ç–æ–≤–∞—Ä–æ–≤</p>
                </div>
                <div class="promotion-banner" style="background: linear-gradient(135deg, #1890FF, #40A9FF);">
                    <h3>üì± –ù–æ–≤–∏–Ω–∫–∏ —Ç–µ—Ö–Ω–∏–∫–∏</h3>
                    <p>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –º–æ–¥–µ–ª–∏ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–æ–≤ –∏ –≥–∞–¥–∂–µ—Ç–æ–≤</p>
                </div>
                <div class="promotion-banner" style="background: linear-gradient(135deg, #52C41A, #73D13D);">
                    <h3>üöö –ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞</h3>
                    <p>–î–æ—Å—Ç–∞–≤–∫–∞ –æ—Ç 3-5 –¥–Ω–µ–π –≤ –†–æ—Å—Å–∏—é</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="categories-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
                <p class="section-subtitle">–ù–∞–π–¥–∏—Ç–µ –∏–º–µ–Ω–Ω–æ —Ç–æ, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ</p>
            </div>
            <div class="categories-grid">
                <div class="category-card" onclick="filterByCategory('–ñ–µ–Ω—Å–∫–∞—è –æ–¥–µ–∂–¥–∞')">
                    <div class="category-icon">
                        <i class="fas fa-female"></i>
                    </div>
                    <h5 class="category-name">–ñ–µ–Ω—Å–∫–∞—è –æ–¥–µ–∂–¥–∞</h5>
                    <p class="category-count">50,000+ —Ç–æ–≤–∞—Ä–æ–≤</p>
                </div>
                <div class="category-card" onclick="filterByCategory('–ú—É–∂—Å–∫–∞—è –æ–¥–µ–∂–¥–∞')">
                    <div class="category-icon">
                        <i class="fas fa-male"></i>
                    </div>
                    <h5 class="category-name">–ú—É–∂—Å–∫–∞—è –æ–¥–µ–∂–¥–∞</h5>
                    <p class="category-count">35,000+ —Ç–æ–≤–∞—Ä–æ–≤</p>
                </div>
                <div class="category-card" onclick="filterByCategory('–û–±—É–≤—å')">
                    <div class="category-icon">
                        <i class="fas fa-shoe-prints"></i>
                    </div>
                    <h5 class="category-name">–û–±—É–≤—å</h5>
                    <p class="category-count">25,000+ —Ç–æ–≤–∞—Ä–æ–≤</p>
                </div>
                <div class="category-card" onclick="filterByCategory('–°—É–º–∫–∏')">
                    <div class="category-icon">
                        <i class="fas fa-shopping-bag"></i>
                    </div>
                    <h5 class="category-name">–°—É–º–∫–∏</h5>
                    <p class="category-count">18,000+ —Ç–æ–≤–∞—Ä–æ–≤</p>
                </div>
                <div class="category-card" onclick="filterByCategory('–¢–µ–ª–µ—Ñ–æ–Ω—ã')">
                    <div class="category-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h5 class="category-name">–¢–µ–ª–µ—Ñ–æ–Ω—ã</h5>
                    <p class="category-count">12,000+ —Ç–æ–≤–∞—Ä–æ–≤</p>
                </div>
                <div class="category-card" onclick="filterByCategory('–ö–æ–º–ø—å—é—Ç–µ—Ä—ã')">
                    <div class="category-icon">
                        <i class="fas fa-laptop"></i>
                    </div>
                    <h5 class="category-name">–ö–æ–º–ø—å—é—Ç–µ—Ä—ã</h5>
                    <p class="category-count">8,000+ —Ç–æ–≤–∞—Ä–æ–≤</p>
                </div>
                <div class="category-card" onclick="filterByCategory('–î–æ–º –∏ —Å–∞–¥')">
                    <div class="category-icon">
                        <i class="fas fa-home"></i>
                    </div>
                    <h5 class="category-name">–î–æ–º –∏ —Å–∞–¥</h5>
                    <p class="category-count">30,000+ —Ç–æ–≤–∞—Ä–æ–≤</p>
                </div>
                <div class="category-card" onclick="filterByCategory('–°–ø–æ—Ä—Ç')">
                    <div class="category-icon">
                        <i class="fas fa-dumbbell"></i>
                    </div>
                    <h5 class="category-name">–°–ø–æ—Ä—Ç</h5>
                    <p class="category-count">15,000+ —Ç–æ–≤–∞—Ä–æ–≤</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Flash Sale Section -->
    <section class="flash-sale-section">
        <div class="container">
            <div class="flash-sale-header">
                <div class="sale-title">
                    <div class="sale-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <span>–ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–∞—è —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∞</span>
                </div>
                <div class="countdown" id="countdown">
                    <div class="time-unit">
                        <span class="time-number" id="hours">23</span>
                        <span class="time-label">—á</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-number" id="minutes">45</span>
                        <span class="time-label">–º</span>
                    </div>
                    <div class="time-unit">
                        <span class="time-number" id="seconds">12</span>
                        <span class="time-label">—Å</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section class="products-section" id="products">
        <div class="container">
            <div class="products-header">
                <div>
                    <h2 class="section-title">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç–æ–≤–∞—Ä—ã</h2>
                    <p class="section-subtitle">–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∞—Å</p>
                </div>
                <div class="filter-buttons">
                    <button class="btn btn-filter active" onclick="showAll()">–í—Å–µ —Ç–æ–≤–∞—Ä—ã</button>
                    <button class="btn btn-filter" onclick="filterByPrice('low')">–ü–æ —Ü–µ–Ω–µ</button>
                    <button class="btn btn-filter" onclick="filterByPrice('high')">–ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É</button>
                    <button class="btn btn-filter" onclick="filterByDiscount()">–°–∫–∏–¥–∫–∏</button>
                    <button class="btn btn-filter" onclick="filterByCategory('new')">–ù–æ–≤–∏–Ω–∫–∏</button>
                </div>
            </div>

            <div class="products-grid" id="products-grid">
                {% for product in products %}
                <div class="product-card" data-category="{{ product.category }}" data-price="{{ product.price }}" data-rating="{{ product.rating }}" data-discount="{{ product.discount }}">
                    <div class="product-image-container">
                        <img src="{{ product.image }}" alt="{{ product.name }}" class="product-image" 
                             onerror="this.src='https://via.placeholder.com/200x200/FF6600/FFFFFF?text=AliExpress'">
                        <div class="product-badges">
                            {% if product.discount > 0 %}
                                <span class="badge badge-sale">-{{ product.discount }}%</span>
                            {% endif %}
                            <span class="badge badge-shipping">–í—ã–±–æ—Ä AliExpress</span>
                        </div>
                        <button class="btn-wishlist" onclick="toggleWishlist('{{ product.id }}')">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>

                    <div class="product-info">
                        <div class="product-category">{{ product.category }}</div>
                        <h5 class="product-name">
                            <a href="{{ url_for('product_detail', product_id=product.id) }}" class="text-decoration-none">
                                {{ product.name }}
                            </a>
                        </h5>
                        <div class="product-rating">
                            <div class="stars">
                                {% for i in range(5) %}
                                    <i class="fas fa-star{% if i >= product.rating|round|int %} text-muted{% endif %}"></i>
                                {% endfor %}
                            </div>
                            <span class="rating-text">({{ product.rating }}) ‚Ä¢ {{ (product.rating * 234)|int }} –æ—Ç–∑—ã–≤–æ–≤</span>
                        </div>

                        <div class="product-price">
                            {% if product.discount > 0 %}
                                {% set discounted_price = product.price * (1 - product.discount / 100) %}
                                <span class="current-price">‚ÇΩ{{ "%.0f"|format(discounted_price * 75) }}</span>
                                <span class="original-price">‚ÇΩ{{ "%.0f"|format(product.price * 75) }}</span>
                                <span class="discount-badge">-{{ product.discount }}%</span>
                            {% else %}
                                <span class="current-price">‚ÇΩ{{ "%.0f"|format(product.price * 75) }}</span>
                            {% endif %}
                        </div>

                        <div class="product-actions">
                            {% if session.user_id %}
                                <button class="add-to-cart-btn" onclick="addToCart('{{ product.id }}')">
                                    <i class="fas fa-shopping-cart"></i>
                                    –í –∫–æ—Ä–∑–∏–Ω—É
                                </button>
                            {% else %}
                                <a href="{{ url_for('register') }}" class="add-to-cart-btn text-decoration-none">
                                    <i class="fas fa-user-plus"></i>
                                    –í–æ–π—Ç–∏
                                </a>
                            {% endif %}
                            <a href="{{ url_for('product_detail', product_id=product.id) }}" class="quick-view-btn">
                                <i class="fas fa-eye"></i>
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <!-- Load More Button -->
            <div class="text-center mt-4">
                <button class="btn btn-load-more" onclick="loadMoreProducts()">
                    <span class="btn-text">
                        <i class="fas fa-plus me-2"></i>
                        –ü–æ–∫–∞–∑–∞—Ç—å –±–æ–ª—å—à–µ —Ç–æ–≤–∞—Ä–æ–≤
                    </span>
                    <div class="btn-loading" style="display: none;">
                        <div class="loading-spinner"></div>
                        –ó–∞–≥—Ä—É–∑–∫–∞...
                    </div>
                </button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="modern-footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="footer-brand">
                        <h5>AliExpress</h5>
                        <p>–ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–∞—è –ø–ª–æ—â–∞–¥–∫–∞ –¥–ª—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É. –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –ø–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º —Ü–µ–Ω–∞–º.</p>
                        <div class="social-links">
                            <a href="#" class="social-link">
                                <i class="fab fa-facebook"></i>
                            </a>
                            <a href="#" class="social-link">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="#" class="social-link">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a href="#" class="social-link">
                                <i class="fab fa-youtube"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <ul class="footer-links">
                        <h6>–ü–æ–∫—É–ø–∞—Ç–µ–ª—è–º</h6>
                        <li><a href="#">–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</a></li>
                        <li><a href="#">–ó–∞—â–∏—Ç–∞ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è</a></li>
                        <li><a href="#">–¶–µ–Ω—Ç—Ä –ø–æ–º–æ—â–∏</a></li>
                        <li><a href="#">–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</a></li>
                        <li><a href="#">–°–æ–æ–±—â–∏—Ç—å –æ –Ω–∞—Ä—É—à–µ–Ω–∏–∏</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <ul class="footer-links">
                        <h6>–ü—Ä–æ–¥–∞–≤—Ü–∞–º</h6>
                        <li><a href="#">–ü—Ä–æ–¥–∞–≤–∞—Ç—å –Ω–∞ AliExpress</a></li>
                        <li><a href="#">–¶–µ–Ω—Ç—Ä –ø—Ä–æ–¥–∞–≤—Ü–∞</a></li>
                        <li><a href="#">–ü–æ–ª–∏—Ç–∏–∫–∏</a></li>
                        <li><a href="#">–°—Ç–∞—Ç—å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º</a></li>
                        <li><a href="#">–†–µ–∫–ª–∞–º–∞</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <ul class="footer-links">
                        <h6>–ö–æ–º–ø–∞–Ω–∏—è</h6>
                        <li><a href="#">–û –Ω–∞—Å</a></li>
                        <li><a href="#">–ù–æ–≤–æ—Å—Ç–∏</a></li>
                        <li><a href="#">–ö–∞—Ä—å–µ—Ä–∞</a></li>
                        <li><a href="#">–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å</a></li>
                        <li><a href="#">–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <ul class="footer-links">
                        <h6>–°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏</h6>
                        <li><a href="#">–ì–æ—Ä—è—á–∞—è –ª–∏–Ω–∏—è: 8-800-555-0199</a></li>
                        <li><a href="#">Email: support@aliexpress.ru</a></li>
                        <li><a href="#">–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 24/7</a></li>
                        <li><a href="#">–ê–¥—Ä–µ—Å: –ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è</a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="d-flex justify-content-between align-items-center flex-wrap">
                    <p class="mb-0">&copy; 2024 AliExpress. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                    <div class="payment-methods">
                        <i class="fab fa-cc-visa"></i>
                        <i class="fab fa-cc-mastercard"></i>
                        <i class="fab fa-cc-paypal"></i>
                        <i class="fab fa-cc-discover"></i>
                        <i class="fab fa-cc-american-express"></i>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Enhanced AliExpress-style functionality
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            updateCountdown();
            setInterval(updateCountdown, 1000);
            initializeProductActions();
        }

        // Countdown Timer
        function updateCountdown() {
            const now = new Date().getTime();
            const saleEnd = new Date(now + 24 * 60 * 60 * 1000).getTime();
            const distance = saleEnd - now;

            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            if (document.getElementById('hours')) {
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
            }
        }

        // Smooth scroll to products
        function scrollToProducts() {
            document.getElementById('products').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }

        // Filter products by category
        function filterByCategory(category) {
            const products = document.querySelectorAll('.product-card');
            products.forEach(product => {
                const productCategory = product.dataset.category;
                if (productCategory === category || category === 'new') {
                    product.style.display = 'block';
                } else {
                    product.style.display = 'none';
                }
            });
            scrollToProducts();
            updateFilterButtons();
        }

        // Show all products
        function showAll() {
            const products = document.querySelectorAll('.product-card');
            products.forEach(product => {
                product.style.display = 'block';
            });
            updateFilterButtons();
        }

        // Filter by price
        function filterByPrice(type) {
            const products = Array.from(document.querySelectorAll('.product-card'));
            if (type === 'low') {
                products.sort((a, b) => parseFloat(a.dataset.price) - parseFloat(b.dataset.price));
            } else if (type === 'high') {
                products.sort((a, b) => parseFloat(b.dataset.rating) - parseFloat(a.dataset.rating));
            }

            const container = document.getElementById('products-grid');
            products.forEach(product => container.appendChild(product));
            updateFilterButtons();
        }

        // Filter by discount
        function filterByDiscount() {
            const products = document.querySelectorAll('.product-card');
            products.forEach(product => {
                const discount = parseInt(product.dataset.discount) || 0;
                if (discount > 0) {
                    product.style.display = 'block';
                } else {
                    product.style.display = 'none';
                }
            });
            scrollToProducts();
            updateFilterButtons();
        }

        // Update filter button states
        function updateFilterButtons() {
            document.querySelectorAll('.btn-filter').forEach(btn => {
                btn.classList.remove('active');
            });
            if (event && event.target) {
                event.target.classList.add('active');
            }
        }

        // Toggle wishlist
        function toggleWishlist(productId) {
            const btn = event.target.closest('.btn-wishlist');
            const icon = btn.querySelector('i');

            if (icon.classList.contains('far')) {
                icon.classList.remove('far');
                icon.classList.add('fas');
                btn.classList.add('active');
                showToast('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å–ø–∏—Å–æ–∫ –∂–µ–ª–∞–Ω–∏–π!', 'success');
            } else {
                icon.classList.remove('fas');
                icon.classList.add('far');
                btn.classList.remove('active');
                showToast('–¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞ –∂–µ–ª–∞–Ω–∏–π', 'info');
            }
        }

        // Load more products
        function loadMoreProducts() {
            const btn = event.target.closest('.btn-load-more');
            const btnText = btn.querySelector('.btn-text');
            const btnLoading = btn.querySelector('.btn-loading');

            btnText.style.display = 'none';
            btnLoading.style.display = 'flex';
            btn.disabled = true;

            setTimeout(() => {
                btnText.style.display = 'flex';
                btnLoading.style.display = 'none';
                btn.disabled = false;
                showToast('–ù–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã!', 'success');
            }, 2000);
        }

        // Initialize product actions
        function initializeProductActions() {
            document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
                if (btn.onclick) return; // Skip if already has click handler

                btn.addEventListener('click', function(e) {
                    e.preventDefault();

                    const originalHTML = this.innerHTML;
                    this.innerHTML = '<div class="loading-spinner"></div> –î–æ–±–∞–≤–ª—è–µ–º...';
                    this.disabled = true;

                    setTimeout(() => {
                        this.innerHTML = '<i class="fas fa-check"></i> –î–æ–±–∞–≤–ª–µ–Ω–æ!';
                        this.classList.add('success');

                        // Update cart count
                        const cartCount = document.querySelector('.cart-count');
                        if (cartCount) {
                            const currentCount = parseInt(cartCount.textContent) || 0;
                            cartCount.textContent = currentCount + 1;
                        }

                        showToast('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!', 'success');

                        setTimeout(() => {
                            this.innerHTML = originalHTML;
                            this.disabled = false;
                            this.classList.remove('success');
                        }, 2000);

                        // Navigate to add to cart if it's a link
                        if (this.href) {
                            setTimeout(() => {
                                window.location.href = this.href;
                            }, 500);
                        }
                    }, 800);
                });
            });
        }

        // Add to cart function
        function addToCart(productId) {
            const btn = event.target.closest('.add-to-cart-btn');
            const originalHTML = btn.innerHTML;

            btn.innerHTML = '<div class="loading-spinner"></div> –î–æ–±–∞–≤–ª—è–µ–º...';
            btn.disabled = true;

            // Send request to server
            fetch('/api/cart/add', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    product_id: productId,
                    quantity: 1
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    btn.innerHTML = '<i class="fas fa-check"></i> –î–æ–±–∞–≤–ª–µ–Ω–æ!';
                    btn.classList.add('success');

                    // Update cart count
                    const cartCount = document.querySelector('.cart-count');
                    if (data.cart_count) {
                        cartCount.textContent = data.cart_count;
                    } else if (cartCount) {
                        const currentCount = parseInt(cartCount.textContent) || 0;
                        cartCount.textContent = currentCount + 1;
                    }

                    showToast('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!', 'success');

                    setTimeout(() => {
                        btn.innerHTML = originalHTML;
                        btn.disabled = false;
                        btn.classList.remove('success');
                    }, 2000);
                } else {
                    btn.innerHTML = originalHTML;
                    btn.disabled = false;
                    showToast(data.error || '–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞', 'error');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                btn.innerHTML = originalHTML;
                btn.disabled = false;
                showToast('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –¢–æ–≤–∞—Ä –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω.', 'error');
            });
        }

        // Toast notification system
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `toast-notification toast-${type}`;
            toast.innerHTML = `
                <div class="toast-content">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                </div>
            `;

            document.body.appendChild(toast);

            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>